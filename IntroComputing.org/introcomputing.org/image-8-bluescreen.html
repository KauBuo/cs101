<html>

<!-- Mirrored from introcomputing.org/image-8-bluescreen.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 24 Jan 2019 10:56:51 GMT -->
<head>
<title>蓝屏特效</title>
<link rel=stylesheet href=style.css type="text/css">

</head>
<body>
<script type="text/javascript" src="cs101.js"></script>
<script type="text/javascript" src="cs101-table.js"></script>
<script type="text/javascript" src="cs101-simulation.js"></script>

<!-- njp
<div id=warning-output></div>
-->

<h1>蓝屏特效</h1>

<ul class="slide">
<li>先运行一下代码，看看效果是什么？
<li>这里你要做的是想尽一切办法去尝试琢磨出来这段代码到底怎么回事儿
<li>整段代码中应该只有2个陌生的东西,应该没问题
<li>提示1: 参考官方文档<a href=image-functions-reference.html>图像处理函数参考</a>
<li>提示2: 本页面的代码随便更改，改坏了退出再进就会又恢复了
<li>提示3：勇于尝试，假设你不知道leaves.jpg是个什么东西，那么有办法先看看么?
<li>
</ul>



<p>

  <p style='max-width:1000'>
  <table class=run>
  <tr><td valign=top width=550> <!-- CODE -->
  <textarea id="image-bluescreen-1" rows=18 cols=65  class=tacode spellcheck=false
  onKeyPress='return handleCR(this ,event)'>
  image = new SimpleImage("stop.jpg");
  back = new SimpleImage("leaves.jpg");

  for (pixel: image) {
    avg = (pixel.getRed() + pixel.getGreen() + pixel.getBlue())/3;
    if (pixel.getRed() > avg * 1.5) {
      x = pixel.getX();
      y = pixel.getY();
      pixel2 = back.getPixel(x, y);
      pixel.setRed(pixel2.getRed());
      pixel.setGreen(pixel2.getGreen());
      pixel.setBlue(pixel2.getBlue());
    }
  }
  print(image);</textarea>
  <br><input type=button style='width:220;height:40;background-color:lightgray'
  value="Run" onClick='evaluateClear("image-bluescreen-1")'>
  </td>
  <td valign=top> <!-- OUTPUT -->
  <div id='image-bluescreen-1-output' style="font-family:courier;font-size:14;"></div>
  </td></tr>
  </table>

<!--
<p>
Building on the earlier image manipulation and logic sections, here we see how to implement a movie special effect.


<h2>Bluescreen Special Effect</h2>

<ul class="slide">
<li>"Bluescreen" video special effect
<li>Video is just a series of still images, 20-60 per second
<li>Have some background image, e.g. leaves.jpg
<li>Detect colored area in an image, e.g. red in stop.jpg
<li>For colored area, substitute in pixels from background image
</ul>

<p>The stop.jpg image and the leaves.jpg image
<br>
<img src=stop.jpg width=260 alt="stop sign">
<img src=leaves.jpg width=300 alt="leaves background texture">



<h2>Bluescreen Algorithm</h2>

<p>
<img src="image-bluescreen.png" alt="bluescreen image/back algorithm">


<ul class="slide">
<li>Bluescreen algorithm
<li>Two images: <b>image</b> and <b>back</b>
<li>Detect, say, red pixels in image
<li>For each red pixel:
<li>--Consider the pixel at the same x,y in back image
<li>--Copy over the pixel from back to image
<li>--What defines how a pixel looks? Three numbers.
<li>--Copy over the red, green, and blue values
<li>Result: red areas, substitute in areas from back image
<li>Adjacent pixels maintained
</ul>


<h2>Bluescreen Example Code</h2>

<ul class="slide">
<li>Two images: <b>image</b> and <b>back</b>
<li>if-statement / avg -- detects red as usual
<li>Inside if:
<li>--1. Figure out x,y of pixel
<li>--2. Get pixel2 from back image (at x,y)
<li>--3. Make pixel the same as pixel2
<li>-- i.e. copy over red/green/blue values
</ul>






<p>
The above bluescreen example code detects the red part of the sign, and for those pixels, copies over the pixels from the back image. The bluescreen code below has 3 key differences from the earlier examples:
<ol>
<li><code>back = new SimpleImage("leaves.jpg");</code>  -- open a <b>second</b> image and store it in the variable "back" (thus far we've only opened one image at a time)
<li><code>pixel2 = back.getPixel(x, y);</code> -- say we are looking at pixel x,y in the main image. Get the x,y pixel from the <b>other image</b> and store it in the variable "pixel2". We can get the x and y of the current pixel in the loop with the functions pixel.getX() and pixel.getY().
<li><code>pixel.setRed(pixel2.getRed());</code>  -- copy the red value from pixel2 to pixel. Also do this for the other two channels. In effect, for the x,y location, this copies the pixel from back to image.
</ol>


<p>
Experiments: (a) Try copying the leaves to the sky instead of to the red parts of the sign (similar to the earlier Night Mode problem). (b) Make the code a little shorter by eliminating the need for "x" and "y" variables. Put the calls to pixel.getX() and pixel.getY() right in the back.getPixel(...) call.

-->

<h2>宝贝</h2>

<!-- note, demo down to 1.0 but not lower ... looks best that way -->

<p>最终效果图: <img src=baby-tree.png alt="宝贝">


<!--
 Demo:
 -talk through pixel2 = ...
 -then paste the copy code
 -then walk 1.5 down to 1.05
-->

<p style='max-width:1000'>
<table class=run>
<tr><td valign=top width=550> <!-- CODE -->
<textarea id="image-bluescreen-2" rows=18 cols=65  class=tacode spellcheck=false
onKeyPress='return handleCR(this ,event)'>
//姓名:XXX 班级:X 学号:XXX
image = new SimpleImage("abby.jpg");
back = new SimpleImage("leaves.jpg");

for (pixel: image) {
  avg = (pixel.getRed() + pixel.getGreen() + pixel.getBlue())/3;
  if (pixel.getGreen() > avg * 1.5) {
    //这里输入你的代码

  }
}
print(image);</textarea>
<br><input type=button style='width:220;height:40;background-color:lightgray'
value="Run" onClick='evaluateClear("image-bluescreen-2")'>
</td>
<td valign=top> <!-- OUTPUT -->
<div id='image-bluescreen-2-output' style="font-family:courier;font-size:14;"></div>
</td></tr>
</table>



<h2>登月猴子</h2>

<!-- nip - video, forgot to show other backgrounds


<p>Now we'll do one like the movies -- film the movie start in front of a blue screen.
-->
<p>结果图
<br><img src=monkey-moon.png alt="登月猴子">



<p style='max-width:1000'>
<table class=run>
<tr><td valign=top width=550>
<textarea id="image-bluescreen-3" rows=22 cols=65  class=tacode spellcheck=false
onKeyPress='return handleCR(this ,event)'>
//姓名:XXX 班级:X 学号:XXX
//提示: 猴子图片的背景色的判断思路：B值差一点点(小数点点)不到平均值[注意是不到，而不是超过哦]
image = new SimpleImage("monkey.jpg");
back = new SimpleImage("moon.jpg");

for (pixel: image) {
  avg = (pixel.getRed() + pixel.getGreen() + pixel.getBlue())/3;
  // your code here

}

print(image);</textarea>
<br><input type=button style='width:220;height:40;background-color:lightgray'
value="Run" onClick='evaluateClear("image-bluescreen-3")'>
</td>
<td valign=top> <!-- OUTPUT -->
<div id='image-bluescreen-3-output' style="font-family:courier;font-size:14;"></div>
</td></tr>
</table>



</body>

<!-- Mirrored from introcomputing.org/image-8-bluescreen.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 24 Jan 2019 10:56:56 GMT -->
</html>
